import{d as v,u as A,r as c,a as P,b as E,c as C,o as G,_ as D,e as o,f as t,g as r,w as h,v as _,F as d,h as u,t as g,p as $,i as B,j as U}from"./index-2WdMh8T2.js";const F=v({setup(){const e=A(),s=c([]),i=c([]),f=P(),S=E(),p=c([]),a=c([]),b=async()=>{try{const n={idMenuSemanal:0,descripcion:"Menú Semanal generado",fechaInicio:new Date().toISOString().split("T")[0],tipoComida:!0,categorias:s.value,alergenos:i.value,idUsuario:1,recetas:[]};await f.crearMenuSemanal(n),S.push("/MenuSemanal")}catch(n){console.error("Error al generar el menú semanal:",n)}},w=async()=>{try{await e.guardarCategoriasSeleccionadas(s.value),alert("Preferencias guardadas exitosamente"),await m()}catch(n){console.error("Error al guardar preferencias:",n)}},y=async()=>{try{await e.guardarAlergenosSeleccionados(i.value),alert("Preferencias guardadas exitosamente"),await m()}catch(n){console.error("Error al guardar preferencias:",n)}},m=async()=>{try{await e.obtenerCategorias(),await e.obtenerAlergenos(),p.value=e.usuariosCategoria,a.value=e.ingredientes.filter(n=>e.ingredientes.some(k=>k.idIngrediente==n.idIngrediente))}catch(n){console.error("Error al obtener preferencias guardadas:",n)}},I=C(()=>e.allCategorias),M=C(()=>e.allIngredientes);return G(async()=>{await e.fetchCategorias(),await e.getAllIngredientes(),await m()}),{categoriasSeleccionadas:s,alergenosSeleccionados:i,categoriasGuardadas:p,alergenosGuardados:a,categoriasComputed:I,ingredientesComputed:M,guardarCategorias:w,guardarAlergenos:y,generarMenuSemanal:b}}}),l=e=>($("data-v-9650a09a"),e=e(),B(),e),V={class:"preferencias-container"},j={class:"preferencias-categorias"},L=l(()=>r("h2",null,"Preferencias de Categorías",-1)),N=["value"],O={class:"preferencias-alergenos"},R=l(()=>r("h2",null,"Alérgenos",-1)),T=["value"],q={class:"preferencias-guardadas"},z=l(()=>r("h2",null,"Preferencias Guardadas",-1)),H=l(()=>r("h3",null,"Categorías Seleccionadas:",-1)),J=l(()=>r("h3",null,"Alérgenos Seleccionados:",-1));function K(e,s,i,f,S,p){return o(),t("div",V,[r("section",j,[L,h(r("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>e.categoriasSeleccionadas=a),multiple:"",class:"categoria-select"},[(o(!0),t(d,null,u(e.categoriasComputed,a=>(o(),t("option",{key:a.idCategoria,value:a.idCategoria},g(a.nombreCategoria),9,N))),128))],512),[[_,e.categoriasSeleccionadas]]),r("button",{onClick:s[1]||(s[1]=(...a)=>e.guardarCategorias&&e.guardarCategorias(...a)),class:"btn-guardar"},"Guardar Preferencias")]),r("section",O,[R,h(r("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>e.alergenosSeleccionados=a),multiple:"",class:"alergenos-select"},[(o(!0),t(d,null,u(e.ingredientesComputed,a=>(o(),t("option",{key:a.idIngrediente,value:a.idIngrediente},g(a.nombreIngrediente),9,T))),128))],512),[[_,e.alergenosSeleccionados]]),r("button",{onClick:s[3]||(s[3]=(...a)=>e.guardarAlergenos&&e.guardarAlergenos(...a)),class:"btn-guardar"},"Guardar Preferencias")]),r("section",q,[z,r("div",null,[H,r("ul",null,[(o(!0),t(d,null,u(e.categoriasGuardadas,a=>(o(),t("li",{key:a.idCategoria},g(a.nombreCategoria),1))),128))]),J,r("ul",null,[(o(!0),t(d,null,u(e.alergenosGuardados,a=>(o(),t("li",{key:a.idAlergeno},g(a.nombreIngrediente),1))),128))])])]),r("button",{onClick:s[4]||(s[4]=(...a)=>e.generarMenuSemanal&&e.generarMenuSemanal(...a))},"Generar Menú Semanal")])}const Q=D(F,[["render",K],["__scopeId","data-v-9650a09a"]]),X=v({__name:"PreferenciasUsuario",setup(e){return(s,i)=>(o(),U(Q))}});export{X as default};
